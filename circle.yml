dependencies:
  pre:
    - npm link
    - echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" >> ~/.npmrc

test:
  override:
    - fliplet env staging
    - fliplet login -u $TEST_USER -p $TEST_PASSWORD
    - fliplet organization $TEST_ORGANIZATION
    - fliplet create-widget awesome-widget
    - cd awesome-widget && fliplet test

deployment:
  npm:
    tag: /v[0-9]+(\.[0-9]+)*/
      commands:
        - npm publish    